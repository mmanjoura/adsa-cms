!function(i){"function"==typeof define&&define.amd?define(["jquery"],i):i("object"==typeof exports?require("jquery"):jQuery)}(function(i){"use strict";function t(e,s){this.$element=i(e),this.options=i.extend({},t.DEFAULTS,i.isPlainObject(s)&&s),this.multiple=!1,this.init()}function e(t){var e=[];return i.isPlainObject(t)&&i.each(t,function(i,t){e.push([i,t].join("="))}),e.join("&")}function s(t){var e={};return t&&(t=t.replace("?","").split("&"),i.each(t,function(i,t){t=t.split("="),i=t[0],e[i]=t[1]})),e}var n=window.location,a="qor.i18n",o="click."+a,l="change."+a,r="input";t.prototype={contructor:t,init:function(){var i=this.$element;this.$languages=i.find(".qor-js-language"),this.$items=i.find(".i18n-list > li"),this.bind()},bind:function(){this.$element.on(o,i.proxy(this.click,this)).on(l,i.proxy(this.change,this)),this.$languages.on(l,i.proxy(this.reload,this))},unbind:function(){this.$element.off(o,this.click).off(l,this.change),this.$languages.off(l,this.reload)},click:function(t){var e,s,n=i(t.target),o=this.$items;if(n.is("button")||(s=n.closest("button")),s&&1===s.size()?n=s:(e=n.closest(".i18n-list-item"),e.hasClass("active highlight")||(n=e)),!n.data().url&&n.length)switch(String(n.data("toggle")).replace("."+a,"")){case"bulk":this.multiple=!0,n.addClass("hidden").siblings("button").removeClass("hidden"),o.addClass("active highlight").find(".qor-js-translator").trigger(r);break;case"exit":this.multiple=!1,n.addClass("hidden"),n.siblings("button").addClass("hidden").filter(".qor-js-bulk").removeClass("hidden"),o.removeClass("active highlight");break;case"edit":o.removeClass("active highlight"),n.closest("li").addClass("active highlight").find(".qor-js-translator").trigger(r);break;case"save":e=n.closest("li"),this.submit(e.find("form"),function(){e.removeClass("active highlight")});break;case"cancel":n.closest("li").removeClass("active highlight");break;case"copy":e=n.closest("li"),e.find(".qor-js-translator").val(e.find(".qor-js-translation-source").text()).trigger(r);break;case"copyall":o.find(".qor-js-copy").click()}},change:function(t){var e=i(t.target);e.is(".qor-js-translator")&&(this.multiple&&this.submit(e.closest("form"),function(i){var t=i.find(".qor-js-help");t.addClass("in"),setTimeout(function(){t.removeClass("in")},3e3)}),e.trigger(r))},reload:function(t){var a=i(t.target),o=s(n.search);o[a.attr("name")]=a.val(),n.search=e(o)},submit:function(t,e){window.onbeforeunload=null,i.fn.qorSlideoutBeforeHide=null,t.is("form")&&i.ajax(n.pathname,{method:"POST",data:t.serialize(),success:function(){t.siblings(".qor-js-translation-target").text(t.find(".qor-js-translator").val()),i.isFunction(e)&&e(t)}})},destroy:function(){this.unbind(),this.$element.removeData(a)}},t.DEFAULTS={},t.plugin=function(e){return this.each(function(){var s,n=i(this),o=n.data(a);o||n.data(a,o=new t(this,e)),"string"==typeof e&&i.isFunction(s=o[e])&&s.apply(o)})},i(function(){t.plugin.call(i(".qor-i18n"))})});
//# sourceMappingURL=i18n.js.map
